<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<title th:text="#{commerce.screen.supplier.add}"></title>

<div th:replace="common/header:: header"></div>

</head>
<body>

	<div class="container">

		<div class="row">
			<div class="col-1 flex-first px-0">
				<div th:include="common/menu :: leftMenu"></div>
			</div>

			<div class="col-11 text-center">

				<div class="card">
					<div class="card-header">
						<h3 th:text="#{commerce.screen.supplier.add}">Add a Supplier</h3>
					</div>
					<div class="card-body">
						<div class="card-text">
							<div th:if="${ success!=null}" th:text="${success}"
								class="alert alert-success " role="alert"></div>
							<div th:if="${ alert!=null}" th:text="${alert}"
								class="alert alert-danger " role="alert"></div>

							<form class="form" id="editForm" action="#"
								th:action="@{/edit_supplier}" th:object="${supplierBean}"
								method="post">
								<div class="form-group text-left">
									<input type="hidden" th:field="*{supplierId}"></input>
									<label th:text="#{commerce.screen.supplier.id}">Supplier Id</label>
									<span th:text="${supplierBean.supplierId}">#</span>
								</div>
								
								<div class="form-group text-left">
									<input type="text" th:field="*{name}"
										class="form-control input-sm "
										th:placeholder="#{commerce.screen.supplier.name}"
										maxlength="80"></input>
									<div th:if="${#fields.hasErrors('name')}" th:errors="*{name}"
										class="text-danger">Name Error</div>
								</div>
								<div class="row">
									<div class="col-xs-6 col-sm-6 col-md-6">
										<div class="form-group  text-left">
											<input type="text" th:field="*{phone1}"
												class="form-control input-sm"
												th:placeholder="#{commerce.screen.supplier.phone1}"
												maxlength="10"></input>
											<div th:if="${#fields.hasErrors('phone1')}"
												th:errors="*{phone1}" class="text-danger">Phone 1
												Error</div>
										</div>
									</div>
									<div class="col-xs-6 col-sm-6 col-md-6">
										<div class="form-group  text-left">
											<input type="text" th:field="*{phone2}"
												class="form-control input-sm"
												th:placeholder="#{commerce.screen.supplier.phone2}"
												maxlength="10"></input>
											<div th:if="${#fields.hasErrors('phone2')}"
												th:errors="*{phone2}" class="text-danger">Phone 2
												Error</div>
										</div>
									</div>
								</div>
								<div class="form-group  text-left">
									<input type="text" th:field="*{email}"
										class="form-control input-sm"
										th:placeholder="#{commerce.screen.supplier.email}"
										maxlength="80"></input>
									<div th:if="${#fields.hasErrors('email')}" th:errors="*{email}"
										class="text-danger">Email Error</div>
								</div>
								<th:block th:each="address,itrStat:${supplierBean.addresses}">
									<div class="row">
										<div class="col-12" th:id="'addressOrg'+${itrStat.index}">
											<div class="address form-group">
												<div class="form-group">
													<input type="hidden"
														th:field="${supplierBean.addresses[__${itrStat.index}__].addressId}"
														class="form-control input-sm"></input> <input type="text"
														th:field="${supplierBean.addresses[__${itrStat.index}__].address1}"
														class="form-control input-sm"
														th:placeholder="#{commerce.screen.address.line1}"
														maxlength="150"></input>
													<div
														th:if="${#fields.hasErrors('addresses[__${itrStat.index}__].address1')}"
														th:errors="${supplierBean.addresses[__${itrStat.index}__].address1}"
														class="text-danger">Address Line 1 Error</div>
												</div>
												<div class="form-group">
													<input type="text"
														th:field="${supplierBean.addresses[__${itrStat.index}__].address2}"
														class="form-control input-sm"
														th:placeholder="#{commerce.screen.address.line2}"
														maxlength="150"></input>
													<div
														th:if="${#fields.hasErrors('addresses[__${itrStat.index}__].address2')}"
														th:errors="${supplierBean.addresses[__${itrStat.index}__].address2}"
														class="text-danger">Address Line 2 Error</div>
												</div>
												<div class="row">
													<div class="col-xs-6 col-sm-6 col-md-6">
														<div class="form-group">
															<input type="text"
																th:field="${supplierBean.addresses[__${itrStat.index}__].city}"
																class="form-control input-sm"
																th:placeholder="#{commerce.screen.address.city}"
																maxlength="30"></input>
															<div
																th:if="${#fields.hasErrors('addresses[__${itrStat.index}__].city')}"
																th:errors="${supplierBean.addresses[__${itrStat.index}__].city}"
																class="text-danger">City Error</div>
														</div>
													</div>
													<div class="col-xs-6 col-sm-6 col-md-6">
														<div class="form-group">
															<input type="text"
																th:field="${supplierBean.addresses[__${itrStat.index}__].state}"
																class="form-control input-sm"
																th:placeholder="#{commerce.screen.address.state}"
																maxlength="45"></input>
															<div
																th:if="${#fields.hasErrors('addresses[__${itrStat.index}__].state')}"
																th:errors="${supplierBean.addresses[__${itrStat.index}__].state}"
																class="text-danger">State Error</div>
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-xs-6 col-sm-6 col-md-6">
														<div class="form-group">
															<input type="text"
																th:field="${supplierBean.addresses[__${itrStat.index}__].country}"
																class="form-control input-sm"
																th:placeholder="#{commerce.screen.address.country}"
																maxlength="45"></input>
															<div
																th:if="${#fields.hasErrors('addresses[__${itrStat.index}__].country')}"
																th:errors="${supplierBean.addresses[__${itrStat.index}__].country}"
																class="text-danger">Country Error</div>
														</div>
													</div>
													<div class="col-xs-6 col-sm-6 col-md-6">
														<div class="form-group">
															<input type="text"
																th:field="${supplierBean.addresses[__${itrStat.index}__].pincode}"
																class="form-control input-sm"
																th:placeholder="#{commerce.screen.address.pincode}"
																maxlength="6"></input>
															<div
																th:if="${#fields.hasErrors('addresses[__${itrStat.index}__].pincode')}"
																th:errors="${supplierBean.addresses[__${itrStat.index}__].pincode}"
																class="text-danger">Pincode Error</div>

														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-xs-6 col-sm-6 col-md-6">
														<div class="form-group">
															<select
																th:field="${supplierBean.addresses[__${itrStat.index}__].addressType}"
																class="form-control input-sm"
																th:placeholder="#{commerce.screen.address.type}">
																<option th:value="Home"
																	th:text="#{commerce.screen.address.home}"></option>
																<option th:value="Work"
																	th:text="#{commerce.screen.address.work}"></option>
																<option th:value="Warehouse"
																	th:text="#{commerce.screen.address.warehouse}"></option>
															</select>
														</div>
													</div>
													<div class="col-xs-6 col-sm-6 col-md-6" th:if="${itrStat.size > 1}">
														<div class="form-group">
																<!--<input type="hidden" name="id" th:value="${itrStat.index}"></input>-->
																 <input type="button" th:onclick="'deleteAddress(\'/edit_supplier?removeSupplierAddress=&amp;id='+ ${itrStat.index} +'\')'" class="btn btn-secondary btn-sm" th:value="#{commerce.screen.btn.address.delete}"></input>  
															  <!-- <a class="btn btn-secondary btn-sm" th:href="@{/delete_supplier_address(id=${itrStat.index})}">Delete</a> --> 
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</th:block>
									<div class="row">
										<div class="col-12" id="addressClone"></div>
									</div>



								<div class="row">
									<div class="col-xs-3 col-sm-3 col-md-3">
										<div class="form-group">
											<input type="submit" name="saveSupplier" value="Save"
												th:value="#{commerce.screen.btn.submit.save}"
												class="form-control btn btn-info btn-block"></input>
										</div>
									</div>
									<div class="col-xs-3 col-sm-3 col-md-3">
														<div class="form-group">
															  <input type="submit" name="addSupplierAddress" class="btn btn-secondary" th:value="#{commerce.screen.btn.address.add}"></input> 
															 <!-- <a class="btn btn-secondary btn-sm" th:href="@{/add_supplier_address}"> <span th:text="#{commerce.screen.btn.address.add}"></span></a> -->  

														</div>
									
									</div>
								</div>
							</form>
						</div>
					</div>

				</div>


			</div>
		</div>


	</div>

<script>
function deleteAddress(addressId) {
	
	$("#editForm").attr("action", addressId);
	
	$('#editForm').submit();
}	
	
</script>


</body>
</html>