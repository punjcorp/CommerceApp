<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<title>User Registration Page</title>
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no"></meta>


<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.0.0-beta.2/css/bootstrap.min.css}" />
<link href="../static/css/custom.css" th:href="@{/css/custom.css}"
	rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
	integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
	crossorigin="anonymous"
	th:href="@{/webjars/jquery/3.2.1/jquery.min.js}"></script>

<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
	integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
	crossorigin="anonymous"></script>

<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
	integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
	crossorigin="anonymous"
	th:href="@{/webjars/bootstrap/4.0.0-beta.2/js/bootstrap.min.js}"></script>
	
</head>
<body>

	<div class="container">

		<div class="row">
			<div class="col-2 flex-first px-0">
				<nav class="nav flex-column">
					<a class="nav-item nav-link" href="manage_user.html"
						th:href="@{/manage_user}">Manage Account</a> <a
						class="
						nav-item nav-link" href="manage_password.html"
						th:href="@{/manage_password}">Change Password</a> <a
						class="
						nav-item nav-link" href="manage_address.html"
						th:href="@{/manage_address}">Manage Addresses</a> <span
						class="nav-item nav-link">Manage Cards</span>
				</nav>
			</div>

			<div class="col-6 text-center">

				<div class="card">
					<div class="card-header">
						<h3>Add a card</h3>
					</div>
					<div class="card-body">
						<div class="card-text">
							<div th:if="${ success!=null}" th:text="${success}"
								class="alert alert-success " role="alert"></div>
							<div th:if="${ alert!=null}" th:text="${alert}"
								class="alert alert-danger " role="alert"></div>

							<form class="form" id="addForm" action="#"
								th:action="@{/add_card}" th:object="${cardBean}" method="post">
								<div class="form-group">
									<input type="text" th:field="*{name}"
										class="form-control input-sm" placeholder="Card Holder's Name"></input>
								</div>
								<div class="form-group">
									<input type="text" th:field="*{cardNo}"
										class="form-control input-sm" placeholder="Card Number"></input>
								</div>
								<div class="row">
									<div class="col-xs-6 col-sm-6 col-md-6">

										<div class="form-group">
											<input type="text" th:field="*{expiryDate}"
												class="form-control input-sm"
												placeholder="Expiry Date (MM/YY)"></input>
										</div>
									</div>
									<div class="col-xs-6 col-sm-6 col-md-6">
										<div class="form-group">
											<input type="text" th:field="*{cvvNo}"
												class="form-control input-sm" placeholder="CVV"></input>
										</div>
									</div>
								</div>

								<div class="row ">
									<div class="col">
										<div class="address ">
											<div id="targetaddress">
											<div>
												<b>Billing Address</b>
											</div>
											<div>
												<span th:text="${primaryAddress.address1}"></span>,
											</div>
											<div>
												<span th:text="${primaryAddress.address2}"></span>,
											</div>
											<div>
												<span th:text="${primaryAddress.city}"></span>, <span
													th:text="${primaryAddress.state}"></span>,
											</div>
											<div>
												<span th:text="${primaryAddress.pincode}"></span>, <span
													th:text="${primaryAddress.country}"></span>
											</div>
											</div>
										</div>

									</div>
								</div>
								<div class="row">
									<div class="col-xs-6 col-sm-6 col-md-6">
										<div class="form-group">

											<input type="button" value="Change Address"
												class="form-control btn-secondary btn-sm"
												data-toggle="modal" data-target="#addressModal"> </input> <input
												type="hidden" th:field="*{address.addressId}"></input>

										</div>
									</div>
								</div>

								<div class="row">
									<div class="col-xs-3 col-sm-3 col-md-3">
										<div class="form-group">
											<input type="submit" value="Save"
												class="form-control btn btn-info btn-block"></input>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>

				</div>


			</div>
		</div>


	</div>

	<!-- Modal -->
	<div class="modal fade " id="addressModal" tabindex="-1" role="dialog"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Choose Address</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="album text-muted">
						<div class="container">

							<div class="row">

								<th:block th:each="address,itrStat:${addresses}">
									<div class="card">
										<div class="address">
											<div class="row">
												<div class="col">
													<input type="radio" name="addressradio" id="addressradio" th:value="${address.addressId}"></input>
												</div>
												<div class="col-10">
												<div th:id="'address'+${address.addressId}">
													<div>
														<b>Billing Address</b>
													</div>
													<div>
														<span th:text="${address.address1}"></span>,
													</div>
													<div>
														<span th:text="${address.address2}"></span>,
													</div>
													<div>
														<span th:text="${address.city}"></span>, <span
															th:text="${address.state}"></span>,
													</div>
													<div>
														<span th:text="${address.pincode}"></span>, <span
															th:text="${address.country}"></span>
													</div>
												</div>
												</div>
											</div>
										</div>
									</div>
								</th:block>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary"
						data-dismiss="modal">Close</button>
					<button type="button" id="addressbtn" class="btn btn-primary">Choose This
						Address</button>
				</div>
			</div>
		</div>
	</div>

<script>
	
$("#addressbtn").click(function(){

	
	$('#addressModal').modal('toggle');
	var selVal=$("#addressradio:checked").val();
	$("#address\\.addressId").val(selVal);
	$("#targetaddress").html($("#address"+selVal).html());
	
	

	
	
});
</script>

</body>
</html>